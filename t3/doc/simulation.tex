\section{Simulation}
\label{sec: sim}
To make this simulation, the model for all the diodes used was the default offered by \textit{ngspice}. \\
The input voltage in this circuit is 
\begin{equation}\label{eq: vs}
v_S=Acos(\omega t),\hspace{3mm} \omega=2\pi f
\end{equation}
with amplitude A=230V and frequency f=50Hz.
\subsection{Transformer}
From the transformer equation 
\begin{equation}
  I_T=nI_S\Leftrightarrow v_T=\frac{1}{n}v_S \Leftrightarrow v_T=\frac{230}{n}cos(\omega t)
\end{equation}
where n is the ratio between the number of spires in the primary winding (S) and the secondary (T).
The current controlled current source generates a current $I_T=nI_s$. We chose n so that the voltage generated by the voltage controlled voltage source, $v_T$ would have amplitude close to 12V. In this case we chose it to be 20V, so we need n to be 11.5.\\
\subsection{Envelope Detector}
The envelope detector reduces the oscillation of the voltage wave and makes the signal totally positive.  To make it, we used the default diode model of \textit{ngspice}, where the ideality factor, $\eta$, is 1. We chose the resistor to have resistance $3k\Omega$ and the capacitor to have capacitance $3\mu F$.\\
\subsection{Voltage Regulator}
The voltage regulator further reduces the oscillations in the wave and is the final step in the converter. In order to do this, we connected to the resistor, in series, a number of diodes. The optimal results were achieved when the number of diodes was 18, so this number of components was used. 
The plots resulting from this analysis can be seen in Figure ~\ref{fig:rc1}. 
